<!DOCTYPE html>
<head>
<title>Color Picker</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">
<link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
<style>
    .text { font-family: 'Quicksand'}
</style>

</head>
<body onclick="copyHEX()">
<div style="position:relative; top: -30px">
    <input id="input" type="text">
</div>
        <div id="box">
            <div id="hex" class="text">#ffffff</div>
            <div id="hsl" class="text">hsl(265, 50%, 100%)</div>
            <div id="rgb" class="text">rgb(255, 255, 255)</div>
            <div id="info" class="text">Left click to copy to clipboard.</div>
        </div>


    <div class="slidecontainer">
        <input type="range" min="0" max="100" value="50" class="slider" id="myRange">
    </div>
    <script>
                var body = document.querySelector('body');
                var slider = document.querySelector('.slider');
                var HEXtext = document.querySelector('#hex');
                var HSLtext = document.querySelector('#hsl');
                var RGBtext = document.querySelector('#rgb');
                var info = document.querySelector('#info');
                window.onload = init;
                function init() {
                    if (window.Event) {
                    document.captureEvents(Event.MOUSEMOVE);
                    }
                    document.onmousemove = getCursorXY;
                }

                function getCursorXY(e) {
                    var cursorX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
                    var cursorY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
                    calculatePercent(cursorX, cursorY);
                }

                function setBody(x,y){
                    var hue = 360 / 100 * x;
                    var saturation = slider.value + '%';
                    var luminance = Math.abs(y - 100) + '%'
                    var color = 'hsl(' + hue +','+ saturation +','+luminance+')';
                    body.setAttribute('style','background-color:' + color);
                    var backGradient = 'background: linear-gradient(90deg, hsl('+hue+',0%,'+luminance+') 0%, hsl('+hue+',100%,'+luminance+') 100%)';
                    var border = 'border-color: hsl(' + hue +','+ saturation +','+y+'%)';
                    var css = backGradient + ';' + border;
                    slider.setAttribute('style', css);
                    var textForHSL =  'hsl(' + hue.toString().substring(0,5) +', '+ slider.value.toString().substring(0,3) +'%, '+Math.abs(y-100).toString().substring(0,4)+'%)';
                    HEXtext.innerText = rgbToHex(body.style.backgroundColor);
                    HSLtext.innerText = textForHSL;
                    RGBtext.innerText = body.style.backgroundColor.toString();
                }

                function calculatePercent(x, y){
                    var xPercent = x / window.innerWidth * 100;
                    var yPercent = y / window.innerHeight * 100;
                    setBody(xPercent, yPercent);
                }
                function rgbToHex(col)
                {
                    if(col.charAt(0)=='r')
                    {
                        col=col.replace('rgb(','').replace(')','').split(',');
                        var r=parseInt(col[0], 10).toString(16);
                        var g=parseInt(col[1], 10).toString(16);
                        var b=parseInt(col[2], 10).toString(16);
                        r=r.length==1?'0'+r:r; g=g.length==1?'0'+g:g; b=b.length==1?'0'+b:b;
                        var colHex='#'+r+g+b;
                        return colHex;
                    }
                }
                function copyHEX(){
                    var input = document.querySelector('#input');
                    input.value = rgbToHex(body.style.backgroundColor);
                    input.select();
                    document.execCommand('copy');
                    info.innerText = 'Value copied to clipboard!';
                    setTimeout(function(){
                        info.innerText = 'Left click to copy to clipboard.'
                    }, 1500);
                }
            </script>